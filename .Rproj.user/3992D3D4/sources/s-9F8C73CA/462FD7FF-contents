---
title: "An introduction to IBGS"
author: "Lizhong Chen"
date: "11/19/2021"
output:
  pdf_document: default
  html_document:
    df_print: paged
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Introduction

Here is a brief introduction to the R package "IBGS". The iterated block Gibbs sampler is a powerful variable selection method in high dimensions. It is important to identify the potential predictors which has significant influence on the response variable.

The "IBGS" package works for the generalized linear models including linear, logistic and poisson models and uses AIC, AICc, BIC, and exBIC as the model selection criterion.

There are two main goals for "IBGS" package:

* Identify the important predictors with the marginal probability

* Make a prediction based on the best selected model or model averaging using top selected models

## Install

To install and load the "IBGS" package, use this command
```{r, echo=FALSE}
cat("install.packages(\"IBGS_0.1.0.tar.gz\", repos = NULL)\nlibrary(IBGS)")
```

The "IBGS" package requires "doParallel" package. Please ensure that "doParallel" package is installed and loaded, then set up the register-cores.
```{r, echo=FALSE}
cat("library(doParallel)\nregisterDoParallel(ncores)\n")
```
where ncores is the number of CPU cores used in the calculation.

## Main function

The main function is 
```{r, echo=FALSE}
cat("BlockGibbsSampler <- function(y, x, n.iter = 3, n.models =10, H = 30, kapp = 20,
                              tau = 0.9, len = 200, k = 1, gamma = 0.5,
                              info = c(\"AIC\", \"BIC\", \"AICc\", \"exBIC\"),
                              family = c(\"gaussian\",\"poisson\", \"binomial\"))")
```
For details, please use help document.
```{r, echo=FALSE}
cat("?BlockGibbsSampler")
```

## Example

Here is an example to show how "IBGS" works. We use the tropical cyclone genesis data.
```{r, echo=FALSE}
load("tcg_ar.RData")
```

It has 1856 samples and 149 predictors.
```{r, collapse=TRUE}
dim(x)
```
We divide the data into train and test set and use the train set ($\approx 80\%$ of data) to run "IBGS" algorithm. Then we use the test set ($\approx 20\%$ of data) to verify the results.

The simple following command is used
```{r}
cat("model <- BlockGibbsSampler(y_train, x_train, info = \"exBIC\", family = \"binomial\")")
```
We only need to specify the response, predictors, the model selection criterion and the model type. 
### Variable ranking

We can plot the marginal probabilities for those important predictors using plots.Gibbs command.
```{r, collapse=TRUE}
plots.Gibbs(model)
```

